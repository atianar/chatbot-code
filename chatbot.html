<!DOCTYPE html>
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<a href="https://www.flaticon.com/free-icons/arrow" title="arrow icons"></a>
<style>
/*Gray-ish box container*/
/* General Styles */
body, html {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background-color: #f5f5f5;
}

/* Chatbox Styles */
#chatbox {
    width: 100%;
    max-width: 500px;
    margin: 0 auto;
    background-color: #e6e7e8;
    padding: 20px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

h2, h4 {
    color: #4d008c;
}

h4 {
    margin-bottom: 30px;
}

/* Box Wrapper */
.box-wrapper {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    height: 200px;
    padding: 20px;
}

/* Box A: Image */
.boxa {
    flex: 0 0 100%;
    width: 50%;
}

img {
    width: 150px;
}

/* Box B: Text Bubble */
.boxb, .boxc {
    flex: 0 0 50%;
    width: 50%;
}

.boxb {
    display: flex;
    justify-content: flex-start;
    align-items: flex-start;
}

.CRUnk_bubble {
    display: flex;
    border-radius: 15px 15px 15px 0;
    margin: 5px;
    padding: 1%;
    min-width: 100px;
    max-width: 150px;
    background-color: #8461b6;
}

.CRUnk_text {
    font-weight: 200;
    color: white;
    margin-left: 10px;
    white-space: nowrap;
    border-right: 3px solid white;
    display: inline-block;
    overflow: hidden;
    animation: typing 4s steps(45, end), blink-caret 0.45s step-end infinite;
    animation-fill-mode: forwards;
}

@keyframes typing {
    from { width: 0; }
    to { width: 100%; }
}

@keyframes blink-caret {
    from, to { border-color: transparent; }
    50% { border-color: white; }
}

/* Box C: Chat Button */
.boxc {
    display: flex;
    justify-content: flex-end;
    align-items: flex-end;
}

.clickable-button {
    background-color: #4d008c;
    color: #fcc425;
    padding: 15px 32px;
    text-align: center;
    font-size: 16px;
    font-weight: bold;
    border-radius: 12px;
    cursor: pointer;
    margin-bottom: 10px;
}

.clickable-button:hover {
    background-color: #ffc425;
    color: #4d008c;
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #fcc425;
    padding: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    width: 320px;
    min-height: min-content;
    max-height: 600px;
    overflow-y: auto;
}

.modal.open {
    display: block;
}

.modal-content {
    text-align: justify;
}

/* Chat Message Container */
#message-container {
    height: 300px;
    overflow-y: auto;
    padding: 10px;
    background-color: #fff;
    border-radius: 10px;
    margin-bottom: 20px;
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
}

.message {
    display: block;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 20px;
    max-width: 70%;
}

.user-message {
    background-color: #4d008c;
    color: white;
    border-radius: 15px 15px 0 15px;
    float: right;
    text-align: right;
}

.bot-message {
    background-color: #8461b6;
    color: white;
    border-radius: 15px 15px 15px 0;
    float: left;
    text-align: left;
}

/* Input Area */
.input-area {
    display: flex;
    justify-content: space-between;
}

input[type="text"] {
    width: 80%;
    padding: 10px;
    border-radius: 5px;
    border: 1px solid #ccc;
}

button {
    padding: 10px 15px;
    background-color: #8461b6;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
}

button:hover {
    background-color: #4d008c;
    color: white;
}

.close-modal {
    background: #8461b6;
    color: white;
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    margin-top: 10px;
}

.close-modal:hover {
    background: #4d008c;
    color: white;
}

/* Overlay */
.overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999;
}

.overlay.open {
    display: block;
}

/* Sticky Modal */
.sticky {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1000;
}

.no-scroll {
    overflow: hidden;
}
</style>
</head>
<body>
    <!-- Chatbox Container -->
    <div id="chatbox">
        <h2>Any other question?</h2>
        <h4>Ask CRUnk, mascot and now Computer Real-time User-assistant.</h4>
        
        <!-- Box Wrapper -->
        <div class="box-wrapper">
            <!-- Box A: CRUnk Image -->
            <div class="boxa">
                <img src="/CRUnk.png" alt="CRUnk img">
            </div>
            
            <!-- Box B: CRUnk Text Bubble -->
            <div class="boxb">
                <div class="CRUnk_bubble">
                    <div class="CRUnk_text">
                        Hello! I am CRUnk
                    </div>
                </div>
            </div>

            <!-- Box C: Chat Button & Modal -->
            <div class="boxc">
                <button class="clickable-button" onclick="centerImage(this)">Chat</button>

                <!-- Overlay -->
                <div class="overlay" id="overlay"></div>

                <!-- Modal Popup -->
                <div class="modal" id="modal">
                    <div class="modal-content">
                        <!-- Message Container -->
                        <div id="message-container"></div>

                        <!-- Input Area -->
                        <div class="input-area">
                            <input type="text" id="userInput" placeholder="Type your message here">
                            <button onclick="sendMessage()">></button> <!-- Make the button the arrow image -->
                        </div>

                        <!-- Close Modal Button -->
                        <button class="close-modal" onclick="closeModal()">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
    const crunkText = document.querySelector('.CRUnk_text');
    const typingDuration = 4000; // Match with CSS duration

    // Remove caret after typing animation
    setTimeout(function() {
        crunkText.style.borderRight = "none";
    }, typingDuration);
});

// Array of bot responses
const botResponses = [
    "Hello! This is CRUnk!",
    "How can I assist you today?",
    "Do you need help with something?",
    "I'm here to help, just ask!",
    "What's your question?",
    "CRUnk is ready to assist!"
];

// Center image and open modal
function centerImage(img) {
    const modal = img.parentElement.querySelector('.modal');
    const overlay = img.parentElement.querySelector('.overlay');

    if (img.classList.contains('sticky')) {
        img.classList.remove('sticky');
        modal.classList.remove('open');
        overlay.classList.remove('open');
        document.body.classList.remove('no-scroll');
    } else {
        const existingStickyImage = document.querySelector('.sticky');

        if (existingStickyImage) {
            existingStickyImage.classList.remove('sticky');
            existingStickyImage.parentElement.querySelector('.modal').classList.remove('open');
            existingStickyImage.parentElement.querySelector('.overlay').classList.remove('open');
        }

        img.classList.add('sticky');
        modal.classList.add('open');
        overlay.classList.add('open');
        document.body.classList.add('no-scroll');
    }
}

// Close modal
function closeModal() {
    const stickyImage = document.querySelector('.sticky');

    if (stickyImage) {
        stickyImage.classList.remove('sticky');
        const modal = stickyImage.parentElement.querySelector('.modal');
        const overlay = stickyImage.parentElement.querySelector('.overlay');
        modal.classList.remove('open');
        overlay.classList.remove('open');
        document.body.classList.remove('no-scroll');
    }
}

// Function to send and display a message in chat
function sendMessage() {
    const userInput = document.getElementById("userInput").value;
    const messageContainer = document.getElementById("message-container");

    if (userInput.trim() !== "") {
        // Create user message
        const userMessage = document.createElement("div");
        userMessage.classList.add("message", "user-message");
        userMessage.textContent = userInput;
        messageContainer.appendChild(userMessage);

        // Clear input field after sending
        document.getElementById("userInput").value = "";
        messageContainer.scrollTop = messageContainer.scrollHeight;

        // Simulate bot response
        setTimeout(() => {
            const botMessage = document.createElement("div");
            botMessage.classList.add("message", "bot-message");

            // Randomly select a response from botResponses array
            const randomResponse = botResponses[Math.floor(Math.random() * botResponses.length)];
            botMessage.textContent = randomResponse;

            messageContainer.appendChild(botMessage);
            messageContainer.scrollTop = messageContainer.scrollHeight;
        }, 1000); // 1-second delay for bot reply simulation
    }
}

    </script>
</body>

</html>
